<!-- Sidebar -->
<aside class="sidebar">
  <div class="logo">
    <img src="assets/images/KonradGourmetLogo.png" alt="Logo" />
  </div>
  <nav>
    <a routerLink="/home"><i class="fa-solid fa-house"></i> Inicio</a>
    <a routerLink="/pedidos" routerLinkActive="active"><i class="fa-solid fa-utensils"></i> Pedidos</a>
  </nav>
</aside>

<!-- Contenedor Principal -->
<div class="content">
  <!-- Header -->
  <div class="header">
    <div class="user">
      <i class="fa-regular fa-user"></i>
      <span>Mesero</span>
      <button class="logout">Cerrar Sesión</button>
    </div>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    <h1>Gestión de Pedidos</h1>

    <!-- Tabs de categorías -->
    <div class="tabs">
      <div>
        <button class="filtro" [disabled]="platos.length === 0" (click)="filtrarPorCategoria('todos')">Todos</button>
        <button class="filtro" *ngFor="let categoria of categoriasPlato" [disabled]="platos.length === 0"
          (click)="filtrarPorCategoria(categoria.nombre_categoria)">
          {{ categoria.nombre_categoria }}
        </button>
      </div>
    </div>

    <div class="layout">
      <!-- Lista de platos -->
      <div class="menu-list">
        <!-- Mensaje si no hay platos disponibles -->
        <div class="no-platos" *ngIf="platos.length === 0">
          <p>Se debe registrar al menos un plato. Contacta al jefe de cocina para agregar opciones al menú.</p>
        </div>
        
        <div class="menu-item" *ngFor="let producto of platos">
          <span>{{ producto.nombre }}</span>
          <button (click)="agregar(producto)">Agregar</button>
        </div>
      </div>

      <!-- Panel de pedido -->
      <div class="order-panel">
        <h2>Detalle del pedido</h2>

        <label for="mesa">Mesa:</label>
        <select id="mesa" [(ngModel)]="mesaSeleccionada">
          <option *ngFor="let m of mesas" [value]="m">Mesa {{ m }}</option>
        </select>

        <div class="order-item" *ngFor="let p of pedido">
          <span>{{ p.nombre }} (x{{ p.cantidad }})</span>
          <div class="order-actions">
            <button (click)="incrementar(p)" title="Aumentar cantidad">
              <i class="fa-solid fa-plus"></i>
            </button>
            <button (click)="disminuir(p)" title="Disminuir cantidad">
              <i class="fa-solid fa-minus"></i>
            </button>
            <button (click)="eliminar(p)" title="Eliminar del pedido">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>

        <button class="send-order" [disabled]="pedido.length === 0 || !mesaSeleccionada || platos.length === 0" 
                (click)="enviarPedido()">
          Enviar Pedido
        </button>
      </div>
    </div>
  </div>
</div>

<app-modal-notificacion [visible]="modalVisible" [tipo]="modalTipo" [titulo]="modalTitulo" [mensaje]="modalMensaje"
  (cerrar)="cerrarModal()">
</app-modal-notificacion>

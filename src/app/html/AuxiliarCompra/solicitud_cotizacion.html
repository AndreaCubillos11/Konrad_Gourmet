<div class="app-container" [formGroup]="cotizacionForm">
    <!-- ===== Menú Lateral ===== -->
    <aside>
        <div class="logo">
            <img src="assets/images/KonradGourmetLogo.png" alt="Logo Konrad Gourmet">
        </div>
        <nav>
            <a routerLink="/inicio" class="active">
                <i class="fa-solid fa-house"></i> Inicio
            </a>
            <a routerLink="/solicitudes">
                <i class="fa-solid fa-file-lines"></i> Solicitudes
            </a>
            <a routerLink="/cotizaciones">
                <i class="fa-solid fa-coins"></i> Cotizaciones
            </a>
        </nav>
    </aside>

    <!-- ===== Contenido Principal ===== -->
    <div class="content">
        <!-- Header superior -->
        <div class="header">
            <div class="user">
                <span>Aux. Compras</span>
            </div>
            <button class="logout">Cerrar Sesión</button>
        </div>

        <!-- Main -->
        <div class="main-content">
            <h1>Solicitud de Cotización</h1>

            <!-- ===== Filtros ===== -->
            <div class="filtros">
                <div class="form-group">
                    <label for="proveedor">Proveedor</label>
                    <select id="proveedor" formControlName="id_proveedor" [(ngModel)]="proveedorSeleccionado">
                        <option value="">Seleccione proveedor</option>
                        <option  *ngFor="let proveedor of proveedores" [value]="proveedor.id_proveedor">
                            {{ proveedor.nombre }}
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fechaRespuesta">Fecha Máx. de Respuesta</label>
                    <input type="date" id="fechaRespuesta" formControlName="fecha_maxima_resp" />
                </div>

                <div class="form-group">
                    
                </div>
            </div>
        </div>

        <!-- ===== Tabla de solicitudes ===== -->
        <h3>Detalles de la solicitud</h3>
        <div class="tabla-container">
            <table>
                <thead>
                    <tr>
                        <th>Fecha de Solicitud</th>
                        <th>Producto</th>
                        <th>Cantidad y Unidad</th>
                        <th>Marca</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody>
                    @for (s of solicitudes; track s.id_solicitud) {
                    <tr>
                        <td>{{ s.fecha_solicitud }}</td>
                        <td>{{ s.Producto.nombre }}</td>
                        <td>{{ s.cantidad }} {{ s.Unidad.nombre_unidad }}</td>
                        <td>{{ s.Marca?.nombre_marca || 'SIN DEFINIR' }}</td>
                        <td class="action-cell">
                            <button class="btn-enviar" (click)="enviarCotizacion(s)">
                                <i class="fa-solid fa-paper-plane"></i> Enviar Cotización
                            </button>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <!-- ===== Modal de notificación ===== -->
    <app-modal-notificacion [visible]="modalVisible" [tipo]="modalTipo" [titulo]="modalTitulo" [mensaje]="modalMensaje"
        (cerrar)="cerrarModal()">
    </app-modal-notificacion>
</div>